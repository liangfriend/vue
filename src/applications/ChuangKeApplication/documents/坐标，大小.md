# 坐标计算

## 位置计算所需信息补充

### 组件结构

+ msMusicSymbolContainer(符号容器) 绝对布局
    + msMusicSymbolSlot 符号槽位 绝对布局
        + msMusicSymbol(符号) 绝对布局

### 符号容器类别

符号容器

+ 定宽容器：
    + 前置定宽容器
        + 拍号，调号， 以及特殊情况（单谱表第一个小节）下的谱号
    + 后置定宽容器
        + 谱号
+ 变宽容器：
    + 音符头容器等，需要计算小节内其它符号计算出最终宽度

## 容器横坐标位置计算

### 符号容器坐标位置计算

符号容器
position: relative

小节变宽容器宽度 = (小节宽度 - 定宽容器宽度)
宽度系数和 = 容器内宽度系数最高的那个容器的宽度系数和
变宽符号容器坐标计算：

+ left: 小节变宽容器宽度 / 小节宽度系数 * 符号之前的宽度系数和 + 前置定宽容器宽度
+ height: 小节高度
+ bottom: 0
+ wdith:小节变宽容器宽度 / 小节宽度系数和 * 当前容器宽度系数

前置定宽符号容器坐标计算

+ left: 符号之前的定宽容器宽度
+ wdith: 容器主符号宽度
+

后置置定宽符号容器坐标计算

+ left: 小节变宽容器宽度 + 符号之前的定宽容器宽度
+ wdith: 容器主符号宽度

### 符号槽位坐标位置计算

符号槽位
position:absolute

+ width: 主符号宽度
+ height:主符号高度
+ left: 动态计算
+ bottom: 动态计算

### 符号坐标位置计算

+ 音符头
+ left: 符号容器宽度 / 2 + 符号宽度 / 2 (居中)

#### 补充说明

小节坐标就是其内部符号容器宽度系数和变成grid布局里的fr自动形成均匀布局。所以不再另写文档赘述。