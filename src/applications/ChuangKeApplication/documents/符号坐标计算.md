# 坐标计算

## 位置计算所需信息补充

### 组件结构

measreContainer插槽父级节点： 相对布局

+ msMusicSymbolContainer(符号容器) 绝对布局
    + msMusicSymbol(符号) 绝对布局

### 符号容器类别

符号容器

+ 定宽容器：
    + 前后置谱号，调号，拍号等。宽度固定，等同于符号宽度（svg比例不变，符号宽度取决于小节高度）
+ 变宽容器：
    + 音符头容器等，需要计算小节内其它符号计算出最终宽度

## 容器横坐标位置计算

### 符号容器横坐标位置计算

符号容器

音符头所在符号容器：

+ left: 最靠后的前置符号left+width + ((小节宽度 - 前后置谱号宽度 - 拍号宽度 - 调号宽度)/
  小节内音符头为主音符的msSymbol的宽度占比系数之和 * 当前符号容器之前的符号容器宽度占比系数之和)
+ wdith: ((小节宽度 - 前后置谱号宽度 - 拍号宽度 - 调号宽度)/
  小节内音符头为主音符的msSymbol的宽度占比系数之和 * 当前符号容器的符号容器宽度占比系数)

谱号所在容器（音符跟随谱号不在此类别）：

+ 前置谱号（只有单谱表第一个小节会存在） left:0
+ 后置谱号 left: 小节width - 容器width

调号所在容器：

+ 前置调号 left: 前置谱号left + 前置谱号width

拍号所在容器：

+ 前置拍号 left: 前置调号left + 前置调号width

### 符号横坐标位置计算

+ 音符头
+ left: 符号容器宽度 / 2 + 符号宽度 / 2 (居中)

#### 补充说明

小节坐标就是其内部符号宽度系数之和变成grid布局里的fr自动形成均匀布局。所以不再另写文档赘述。